<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <!-- Permitir imágenes externas de Unsplash -->
    <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval'; img-src * data: blob:;">

    <title>Infinity Gallery</title>
    <style>
        /* === BASE === */
        * {
            box-sizing: border-box;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }

        body {
            background-color: #050505;
            color: white;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            /* Respetar el Notch del teléfono */
            padding-top: env(safe-area-inset-top);
            padding-bottom: env(safe-area-inset-bottom);
        }

        /* === HEADER FLOTANTE === */
        header {
            position: fixed;
            top: 0; left: 0; right: 0;
            background: rgba(5, 5, 5, 0.8);
            backdrop-filter: blur(15px);
            z-index: 10;
            padding: 15px 20px;
            padding-top: calc(15px + env(safe-area-inset-top));
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        h1 {
            font-size: 1.2rem;
            font-weight: 700;
            letter-spacing: 1px;
            margin: 0;
            background: linear-gradient(90deg, #fff, #aaa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle { font-size: 0.8rem; color: #666; }

        /* === GRILLA DE IMÁGENES (Masonry Style) === */
        .gallery-container {
            padding: 80px 10px 20px 10px; /* Espacio para el header */
            display: grid;
            grid-template-columns: repeat(2, 1fr); /* 2 Columnas en móvil */
            gap: 10px;
        }

        .img-card {
            background-color: #1a1a1a;
            border-radius: 16px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
            transition: transform 0.2s;
            aspect-ratio: 9/14; /* Formato vertical moderno */
            cursor: pointer;
            opacity: 0; /* Para animación de entrada */
            animation: fadeIn 0.6s forwards;
        }

        .img-card:active { transform: scale(0.96); }

        .img-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        /* Gradiente sobre la imagen */
        .card-overlay {
            position: absolute;
            bottom: 0; left: 0; width: 100%;
            height: 40%;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            display: flex;
            align-items: flex-end;
            padding: 15px;
        }

        .card-info { font-size: 0.8rem; font-weight: 500; color: #ddd; }

        /* === LIGHTBOX (MODAL DE PANTALLA COMPLETA) === */
        #lightbox {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.95);
            backdrop-filter: blur(5px);
            z-index: 50;
            display: none; /* Oculto por defecto */
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s;
        }

        #lightbox-img {
            max-width: 100%;
            max-height: 80%;
            border-radius: 8px;
            box-shadow: 0 0 30px rgba(255,255,255,0.1);
            transform: scale(0.9);
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .close-btn {
            position: absolute;
            top: 40px; right: 20px;
            width: 40px; height: 40px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            font-size: 1.5rem; color: white;
            cursor: pointer;
        }

        /* === ANIMACIONES === */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

    </style>
</head>
<body>

    <header>
        <div>
            <h1>UNSPLASH</h1>
            <span class="subtitle">Curated Collection</span>
        </div>
        <!-- Icono menú simulado -->
        <div style="width: 24px; height: 2px; background: white; box-shadow: 0 6px 0 white;"></div>
    </header>

    <!-- Contenedor de la Galería -->
    <div class="gallery-container" id="gallery">
        <!-- Las imágenes se inyectan con JS aquí -->
    </div>

    <!-- Modal Lightbox -->
    <div id="lightbox" onclick="cerrarModal()">
        <div class="close-btn">&times;</div>
        <img id="lightbox-img" src="" alt="Full view">
    </div>

    <script>
        // URLs base de Unsplash (Keywords para obtener fotos variadas)
        const categories = ['architecture', 'nature', 'neon', 'cyberpunk', 'portrait', 'technology', 'minimalism', 'dark'];
        const gallery = document.getElementById('gallery');
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = document.getElementById('lightbox-img');

        // Generar 20 imágenes dinámicas
        function cargarGaleria() {
            categories.forEach((cat, index) => {
                // Hacemos 3 pasadas para tener bastantes fotos
                for(let i=0; i<3; i++) {
                    crearTarjeta(cat, index * 3 + i);
                }
            });
        }

        function crearTarjeta(categoria, index) {
            // URL aleatoria de Unsplash
            // Agregamos 'random' y el índice para evitar caché y que salgan repetidas
            const width = 400; 
            const height = 600;
            const imgUrl = `https://source.unsplash.com/random/${width}x${height}/?${categoria}&sig=${index}`;
            // Nota: Unsplash source a veces es lento, si falla usaremos un placeholder, 
            // pero para el ejemplo usamos un servicio rápido alternativo si source falla:
            // Usaré picsum para garantizar velocidad en la demo si unsplash source da timeout,
            // pero intentaré mantener la estética.
            
            // URL Alternativa más estable para demos:
            const stableUrl = `https://picsum.photos/${width}/${height}?random=${index}`;

            const card = document.createElement('div');
            card.className = 'img-card';
            // Retraso escalonado para la animación (staggered animation)
            card.style.animationDelay = `${index * 0.05}s`;

            card.innerHTML = `
                <img src="${stableUrl}" loading="lazy" alt="${categoria}">
                <div class="card-overlay">
                    <span class="card-info">${categoria.toUpperCase()} 0${index+1}</span>
                </div>
            `;

            // Evento Click
            card.onclick = () => abrirModal(stableUrl);

            gallery.appendChild(card);
        }

        function abrirModal(url) {
            // Cambiar a resolución alta para el modal (truco de URL)
            // En picsum cambiamos las dimensiones en el string
            const highResUrl = url.replace('400/600', '1080/1920');
            
            lightboxImg.src = highResUrl;
            lightbox.style.display = 'flex';
            
            // Pequeño timeout para permitir que el display:flex se aplique antes de la opacidad
            setTimeout(() => {
                lightbox.style.opacity = '1';
                lightboxImg.style.transform = 'scale(1)';
            }, 10);
        }

        function cerrarModal() {
            lightbox.style.opacity = '0';
            lightboxImg.style.transform = 'scale(0.9)';
            setTimeout(() => {
                lightbox.style.display = 'none';
                lightboxImg.src = ''; // Limpiar para ahorrar memoria
            }, 300);
        }

        // Iniciar
        document.addEventListener('DOMContentLoaded', cargarGaleria);

    </script>
</body>
</html>
