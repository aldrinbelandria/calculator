<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <!-- CSP -->
    <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval'; img-src * data: blob:;">

    <title>Infinity Gallery</title>
    <style>
        /* === BASE === */
        * {
            box-sizing: border-box;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        }

        body {
            background-color: #000000; /* Negro puro de fondo */
            color: white;
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }

        /* === HEADER SÓLIDO NATIVO === */
        header {
            position: fixed;
            top: 0; left: 0; right: 0;
            background-color: #000000; /* Negro sólido para unirse con la barra de estado */
            z-index: 100;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #222; /* Línea sutil separadora */
            height: 60px; /* Altura fija estándar */
        }

        h1 {
            font-size: 1.3rem;
            font-weight: 800;
            letter-spacing: 1px;
            margin: 0;
            color: #ffffff;
        }

        .subtitle { font-size: 0.75rem; color: #888; font-weight: 500; text-transform: uppercase; }

        /* === GRILLA DE IMÁGENES === */
        .gallery-container {
            /* Empujamos el contenido para que no quede debajo del header */
            padding: 70px 10px 20px 10px; 
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .img-card {
            background-color: #111;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            aspect-ratio: 9/14;
            cursor: pointer;
            opacity: 0;
            animation: fadeIn 0.6s forwards;
        }

        .img-card:active { opacity: 0.7; }

        .img-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        /* Gradiente sutil abajo */
        .card-overlay {
            position: absolute;
            bottom: 0; left: 0; width: 100%;
            height: 50%;
            background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
            display: flex;
            align-items: flex-end;
            padding: 12px;
        }

        .card-info { font-size: 0.75rem; font-weight: 600; color: #eee; letter-spacing: 0.5px; }

        /* === LIGHTBOX === */
        #lightbox {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: #000;
            z-index: 200; /* Muy por encima */
            display: none;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.25s;
        }

        #lightbox-img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .close-btn {
            position: absolute;
            top: 20px; right: 20px;
            width: 40px; height: 40px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            font-size: 2rem; color: white;
            z-index: 201;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

    </style>
</head>
<body>

    <header>
        <div>
            <h1>UNSPLASH</h1>
            <span class="subtitle">Official Collection</span>
        </div>
        <!-- Icono de menú hamburguesa simple -->
        <div style="display:flex; flex-direction:column; gap:5px;">
            <div style="width:24px; height:2px; background:white;"></div>
            <div style="width:16px; height:2px; background:white; align-self:flex-end;"></div>
        </div>
    </header>

    <div class="gallery-container" id="gallery"></div>

    <div id="lightbox" onclick="cerrarModal()">
        <div class="close-btn">&times;</div>
        <img id="lightbox-img" src="" alt="View">
    </div>

    <!-- SCRIPT CORDOVA -->
    <script src="cordova.js"></script>
    <script>
        // === PARTE CLAVE: ESTILO NATIVO ===
        document.addEventListener('deviceready', () => {
            if (window.StatusBar) {
                // 1. Esto hace que la barra de estado NO se monte encima de tu web
                StatusBar.overlaysWebView(false);
                
                // 2. Pintamos la barra de estado de NEGRO SÓLIDO
                StatusBar.backgroundColorByHexString('#000000');
                
                // 3. Iconos blancos (hora, batería)
                StatusBar.styleLightContent();
            }
            // Si usas barra de navegación, también negra
            if (window.NavigationBar) {
                window.NavigationBar.backgroundColorByHexString('#000000');
            }
        }, false);

        // === LÓGICA DE GALERÍA ===
        const categories = ['architecture', 'nature', 'cyberpunk', 'neon', 'black', 'tech'];
        const gallery = document.getElementById('gallery');
        const lightbox = document.getElementById('lightbox');
        const lightboxImg = document.getElementById('lightbox-img');

        function cargarGaleria() {
            let delay = 0;
            // Generamos 18 imágenes
            for(let i=0; i<18; i++) {
                const cat = categories[i % categories.length];
                crearTarjeta(cat, i);
            }
        }

        function crearTarjeta(categoria, index) {
            // Usamos Picsum para velocidad y estabilidad en demo
            const imgUrl = `https://picsum.photos/400/600?random=${index + 100}`;
            
            const card = document.createElement('div');
            card.className = 'img-card';
            // Animación en cascada
            card.style.animationDelay = `${index * 0.05}s`;

            card.innerHTML = `
                <img src="${imgUrl}" loading="lazy" alt="${categoria}">
                <div class="card-overlay">
                    <span class="card-info">${categoria.toUpperCase()}</span>
                </div>
            `;

            card.onclick = () => abrirModal(imgUrl);
            gallery.appendChild(card);
        }

        function abrirModal(url) {
            // Truco para pedir imagen en alta calidad
            const highRes = url.replace('/400/600', '/1080/1920');
            
            lightboxImg.src = highRes;
            lightbox.style.display = 'flex';
            // Ocultar barra de estado al ver foto completa (Efecto inmersivo)
            if(window.StatusBar) StatusBar.hide();
            
            setTimeout(() => lightbox.style.opacity = '1', 10);
        }

        function cerrarModal() {
            lightbox.style.opacity = '0';
            // Mostrar barra de estado de nuevo
            if(window.StatusBar) StatusBar.show();
            
            setTimeout(() => {
                lightbox.style.display = 'none';
                lightboxImg.src = '';
            }, 250);
        }

        document.addEventListener('DOMContentLoaded', cargarGaleria);
    </script>
</body>
</html>
